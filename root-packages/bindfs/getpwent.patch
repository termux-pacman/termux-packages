--- a/src/userinfo.c
+++ b/src/userinfo.c
@@ -100,6 +100,11 @@
 
 static int rebuild_uid_cache(void)
 {
+#ifdef __ANDROID__
+    /* Not supported on Android. */
+    return 0;
+#else
+
     /* We're holding the lock, so we have mutual exclusion on getpwent and getgrent too. */
     struct passwd *pw;
     struct uid_cache_entry *ent;
@@ -142,6 +147,7 @@
     endpwent();
     clear_uid_cache();
     return 0;
+#endif /* __ANDROID__ */
 }
 
 static int rebuild_gid_cache(void)
